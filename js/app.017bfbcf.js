(function(t){function e(e){for(var a,o,l=e[0],r=e[1],c=e[2],u=0,m=[];u<l.length;u++)o=l[u],Object.prototype.hasOwnProperty.call(n,o)&&n[o]&&m.push(n[o][0]),n[o]=0;for(a in r)Object.prototype.hasOwnProperty.call(r,a)&&(t[a]=r[a]);p&&p(e);while(m.length)m.shift()();return s.push.apply(s,c||[]),i()}function i(){for(var t,e=0;e<s.length;e++){for(var i=s[e],a=!0,l=1;l<i.length;l++){var r=i[l];0!==n[r]&&(a=!1)}a&&(s.splice(e--,1),t=o(o.s=i[0]))}return t}var a={},n={app:0},s=[];function o(e){if(a[e])return a[e].exports;var i=a[e]={i:e,l:!1,exports:{}};return t[e].call(i.exports,i,i.exports,o),i.l=!0,i.exports}o.m=t,o.c=a,o.d=function(t,e,i){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},o.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(o.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)o.d(i,a,function(e){return t[e]}.bind(null,a));return i},o.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="/metro-game/";var l=window["webpackJsonp"]=window["webpackJsonp"]||[],r=l.push.bind(l);l.push=e,l=l.slice();for(var c=0;c<l.length;c++)e(l[c]);var p=r;s.push([0,"chunk-vendors"]),i()})({0:function(t,e,i){t.exports=i("56d7")},"00a2":function(t,e,i){"use strict";var a=i("2fa9"),n=i.n(a);n.a},"2fa9":function(t,e,i){},3822:function(t,e,i){},"3b32":function(t,e,i){"use strict";var a=i("5313"),n=i.n(a);n.a},"451d":function(t,e,i){"use strict";var a=i("e171"),n=i.n(a);n.a},"4bd7":function(t,e,i){},5313:function(t,e,i){},"53e7":function(t,e,i){},"56d7":function(t,e,i){"use strict";i.r(e);i("e260"),i("e6cf"),i("cca6"),i("a79d");var a=i("2b0e"),n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{attrs:{id:"app"}},[i("leaflet-map")],1)},s=[],o=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[t.showLoader?i("app-loader"):t._e(),t.popup.show?i("popup-modal",{on:{onShowResult:function(e){return t.closePopup(!0)},onClosePopup:t.closePopup}},[i("p",{attrs:{slot:"header"},slot:"header"},[t._v(t._s(t.popup.text))]),t.popup.showButton?i("template",{slot:"button"},[t._v(t._s(t.inputParams.finalPopupButton))]):t._e()],2):t._e(),t.showPasswordInput?i("popup-modal",{on:{onShowResult:function(e){return t.closePopup(!0)},onShowStat:t.showStat,onClosePopup:t.closePopup}},[i("p",{attrs:{slot:"header"},slot:"header"},[t._v("Антон, введи пароль для получения статистики :)")]),i("template",{slot:"body"},[i("input",{attrs:{type:"password"}})]),i("template",{slot:"buttonstat"},[t._v("Показать")])],2):t._e(),i("section",{directives:[{name:"shortkey",rawName:"v-shortkey",value:["ctrl","alt","space"],expression:"['ctrl', 'alt', 'space']"},{name:"show",rawName:"v-show",value:1===t.gameStep,expression:"gameStep === 1"}],staticClass:"app-section start-section",on:{shortkey:t.theAction}},[i("section-header",{attrs:{"section-label":t.inputParams.gameLabel,"section-header":t.inputParams.startHeader,"section-meta":t.inputParams.startMeta,"section-description":t.inputParams.startText}}),i("animation-start-slide"),i("ui-button",{attrs:{"button-class":"start-game-button start"},on:{click:function(e){t.gameStep=2}}},[t._v(" "+t._s(t.inputParams.startButton)+" ")])],1),2===t.gameStep?i("section",{staticClass:"app-section"},[i("section-header",{attrs:{"section-header":t.inputParams.gameHeader,"section-description":t.inputParams.gameText}}),i("l-map",{staticStyle:{height:"480px",width:"100%"},attrs:{zoom:t.map.zoom.value,"min-zoom":t.map.zoom.min,"max-zoom":t.map.zoom.max,options:t.map.options,bounds:t.map.bounds,"max-bounds":t.map.bounds},on:{click:t.onMapClick}},[i("l-tile-layer",{attrs:{url:t.map.tileUrl,"layer-type":"base"}}),i("l-control",{attrs:{position:"topleft"}},[i("user-stations-info",{attrs:{count:t.userStationsLeft}})],1),i("l-control-zoom",{attrs:{position:"bottomright"}}),t._l(t.map.data,(function(e){return i("l-layer-group",{key:e.id,attrs:{visible:e.visible,"layer-type":"overlay",name:e.name},on:{"update:visible":function(i){return t.$set(e,"visible",i)}}},[i("l-layer-group",t._l(e.markers,(function(t){return i("l-circle-marker",{key:t.id,attrs:{"lat-lng":t.position,visible:t.visible,color:e.markersColor,fillColor:"#fff",fillOpacity:1,weight:4,radius:8}},[i("l-tooltip",{attrs:{content:t.tooltip}})],1)})),1),i("l-polyline",{staticClass:"metro-line",attrs:{"lat-lngs":e.polyline.points,visible:e.polyline.visible,color:e.polyline.color,weight:6}})],1)})),i("l-layer-group",[t._l(t.markers,(function(e){return i("l-marker",{key:e.id,attrs:{visible:e.visible,draggable:e.draggable,"lat-lng":e.position},on:{"update:latLng":[function(i){return t.$set(e,"position",i)},function(i){return t.moveUserMarkerHandler(i,e.id)}],"update:lat-lng":function(i){return t.$set(e,"position",i)}}},[i("l-icon",{attrs:{"icon-size":t.dynamicSize,"icon-anchor":t.dynamicAnchor,"icon-url":e.icon,"icon-retina-url":e.icon2x,className:e.className}},[i("span",[t._v(t._s(e.id))])])],1)})),t.markersLine.length>1?i("l-polyline",{staticClass:"user-line",attrs:{"lat-lngs":t.markersLine,weight:6,color:"#84B132"}}):t._e()],2)],2),t.userStationAdded>0?i("div",{staticClass:"game-actions"},[i("ui-button",{attrs:{"button-class":"light"},on:{click:t.removeLast}},[t._v("Удалить последнюю точку")]),i("ui-button",{attrs:{"is-disabled":t.isDisabledFinishButton},on:{click:t.showResults}},[t._v("Готово")])],1):t._e()],1):t._e(),3===t.gameStep?i("section",{staticClass:"app-section section-finish"},[i("section-header",{attrs:{"section-header":t.inputParams.finalHeader,"section-description":t.inputParams.finalText}}),i("div",{staticClass:"game-results"},[i("div",{staticClass:"result-map user-map"},[i("l-map",{ref:"map",staticStyle:{height:"235px",width:"100%"},attrs:{zoom:10,"min-zoom":10,"max-zoom":10,options:t.map.options,bounds:t.map.bounds,"max-bounds":t.map.bounds}},[i("l-tile-layer",{attrs:{url:t.map.tileUrl,"layer-type":"base"}}),t._l(t.map.data,(function(e){return i("l-layer-group",{key:e.id,attrs:{visible:e.visible,"layer-type":"overlay",name:e.name},on:{"update:visible":function(i){return t.$set(e,"visible",i)}}},[i("l-layer-group",t._l(e.markers,(function(t){return i("l-circle-marker",{key:t.id,attrs:{"lat-lng":t.position,visible:t.visible,color:e.markersColor,fillColor:"#fff",fillOpacity:1,weight:2,radius:4}},[i("l-tooltip",{attrs:{content:t.tooltip}})],1)})),1),i("l-polyline",{staticClass:"metro-line",attrs:{"lat-lngs":e.polyline.points,visible:e.polyline.visible,color:e.polyline.color}})],1)})),t._l(this.markers,(function(e){return i("l-layer-group",{key:e.id,attrs:{visible:e.visible,"layer-type":"overlay",name:e.name},on:{"update:visible":function(i){return t.$set(e,"visible",i)}}},[i("l-circle-marker",{attrs:{"lat-lng":e.position,visible:e.visible,color:"#84B132",fillColor:"#fff",fillOpacity:1,weight:2,radius:4}})],1)})),i("l-polyline",{staticClass:"metro-line-3",attrs:{"lat-lngs":[].concat(this.getUserLineCoords()),visible:!0,color:"#84B132"}})],2),i("div",{staticClass:"map-description"},[t._v(" "+t._s(t.inputParams.userMapDescription)+" ")])],1),i("div",{staticClass:"result-map gov-map"},[i("l-map",{staticStyle:{height:"235px",width:"100%"},attrs:{zoom:10,"min-zoom":10,"max-zoom":10,options:t.map.options,bounds:t.map.bounds,"max-bounds":t.map.bounds}},[i("l-tile-layer",{attrs:{url:t.map.tileUrl,"layer-type":"base"}}),t._l(t.map.data,(function(e){return i("l-layer-group",{key:e.id,attrs:{visible:e.visible,"layer-type":"overlay",name:e.name},on:{"update:visible":function(i){return t.$set(e,"visible",i)}}},[i("l-layer-group",t._l(e.markers,(function(t){return i("l-circle-marker",{key:t.id,attrs:{"lat-lng":t.position,visible:t.visible,color:e.markersColor,fillColor:"#fff",fillOpacity:1,weight:2,radius:4}},[i("l-tooltip",{attrs:{content:t.tooltip}})],1)})),1),i("l-polyline",{staticClass:"metro-line",attrs:{"lat-lngs":e.polyline.points,visible:e.polyline.visible,color:e.polyline.color}})],1)})),t._l(this.getStations3Coords(),(function(e){return i("l-layer-group",{key:e.id,attrs:{visible:e.visible,"layer-type":"overlay",name:e.name},on:{"update:visible":function(i){return t.$set(e,"visible",i)}}},[i("l-circle-marker",{attrs:{"lat-lng":e.position,visible:e.visible,color:"#84B132",fillColor:"#fff",fillOpacity:1,weight:2,radius:4}})],1)})),i("l-polyline",{staticClass:"metro-line-3",attrs:{"lat-lngs":[].concat(this.getLine3Coords()),visible:!0,color:"#84B132"}})],2),i("div",{staticClass:"map-description"},[t._v(" "+t._s(t.inputParams.metroMapDescription)+" ")])],1)]),i("ui-button",{attrs:{"button-class":"light"},on:{click:t.runGameAgain}},[t._v("Начать заново")]),i("ui-button",{attrs:{"button-class":"light"},on:{click:t.showHotmap}},[t._v("Показать hotmap")]),t.isNull(t.commentsBlock)?t._e():i("div",{domProps:{innerHTML:t._s(t.commentsBlock)}})],1):t._e(),4===t.gameStep?i("section",{staticClass:"app-section"},[i("section-header",{attrs:{"section-header":"Статистика пользовательских точек","section-description":"На этой версии карты можно оценить, где больше всего пользователи TUT.BY хотят, чтобы появились новые станции метро"}}),i("l-map",{staticStyle:{height:"480px",width:"100%"},attrs:{zoom:t.map.zoom.value,"min-zoom":t.map.zoom.min,"max-zoom":t.map.zoom.max,options:t.map.options,bounds:t.map.bounds,"max-bounds":t.map.bounds}},[i("l-tile-layer",{attrs:{url:t.map.tileUrl,"layer-type":"base"}}),i("l-layer-group",t._l(t.cellsCoords,(function(t){return i("l-polygon",{key:t.id,attrs:{"lat-lngs":t.coords,color:"#ffc9c9",opacity:.8,weight:1,fillColor:"#ffc9c9",fillOpacity:t.opacity}})})),1)],1)],1):t._e(),i("sharing-list",{directives:[{name:"show",rawName:"v-show",value:3===t.gameStep,expression:"gameStep === 3"}]})],1)},l=[],r=(i("99af"),i("4de4"),i("4160"),i("a630"),i("d81d"),i("a434"),i("d3b7"),i("ac1f"),i("25f0"),i("3ca3"),i("5319"),i("1276"),i("498a"),i("159b"),i("ddb0"),i("2b3d"),i("53ca")),c=i("e11e"),p=i("bc3a"),u=i.n(p),m=i("2699"),d=i("a40a"),h=i("4e2b"),g=i("635f"),f=i("258a"),b=i("1ebb"),v=i("31dc"),y=i("2253"),C=i("c8b6"),_=i("fbba"),k=i("ea97"),w=(i("75df"),function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("a",{staticClass:"button",class:t.buttonClass,attrs:{disabled:t.isDisabled},on:{click:t.onClick}},[t._t("default")],2)}),S=[],L={name:"UiButton",props:{buttonClass:String,isDisabled:Boolean},methods:{onClick:function(){this.isDisabled||this.$emit("click")}}},x=L,N=(i("d5ed"),i("2877")),P=Object(N["a"])(x,w,S,!1,null,"77c0571c",null),M=P.exports,z=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("transition",{attrs:{name:"modal"}},[i("div",{staticClass:"app-modal-mask"},[i("div",{staticClass:"app-modal-wrapper"},[i("div",{staticClass:"app-modal-container"},[i("a",{staticClass:"app-icon-close",attrs:{href:"#"},on:{click:function(e){return t.$emit("onClosePopup")}}},[i("icon-base",[i("icon-close")],1)],1),i("img",{staticClass:"app-modal-header-image",attrs:{src:"https://img.tyt.by/news/special/metro-game/popup-header-image.png",alt:""}}),i("div",{staticClass:"app-modal-header"},[t._t("header")],2),t.hasBodySlot?i("div",{staticClass:"app-modal-body"},[t._t("body")],2):t._e(),t.hasButtonSlot?i("div",{staticClass:"app-modal-footer"},[i("ui-button",{attrs:{buttonClass:"start"},on:{click:function(e){return t.$emit("onShowResult")}}},[t._t("button")],2)],1):t._e(),t.hasButtonStatSlot?i("div",{staticClass:"app-modal-footer"},[i("ui-button",{attrs:{buttonClass:"light"},on:{click:function(e){return t.$emit("onShowStat")}}},[t._t("buttonstat")],2)],1):t._e()])])])])},B=[],$=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",width:t.width,height:t.height,viewBox:t.viewbox,"aria-labelledby":t.iconName,role:"presentation"}},[i("title",{attrs:{id:t.iconName,lang:"en"}},[t._v(t._s(t.iconName)+" icon")]),i("g",{attrs:{fill:t.iconColor}},[t._t("default")],2)])},T=[],A=(i("a9e3"),{props:{iconName:{type:String,default:"box"},width:{type:[Number,String],default:20},height:{type:[Number,String],default:20},iconColor:{type:String,default:"currentColor"}},computed:{viewbox:function(){return"0 0 ".concat(this.width," ").concat(this.height)}}}),D=A,O=(i("f2ec"),Object(N["a"])(D,$,T,!1,null,"44169770",null)),j=O.exports,H=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("path",{attrs:{d:"M14 1.55531L8.55531 7L14 12.4447L12.4447 14L7 8.55531L1.55531 14L0 12.4447L5.44469 7L0 1.55531L1.55531 0L7 5.44469L12.4447 0L14 1.55531Z"}})},U=[],E={},R=Object(N["a"])(E,H,U,!1,null,null,null),I=R.exports,F={name:"PopupModal",components:{UiButton:M,IconBase:j,IconClose:I},computed:{hasButtonSlot:function(){return!!this.$slots["button"]},hasButtonStatSlot:function(){return!!this.$slots["buttonstat"]},hasBodySlot:function(){return!!this.$slots["body"]}}},q=F,V=(i("6812"),Object(N["a"])(q,z,B,!1,null,null,null)),G=V.exports,J=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},W=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"app-loader-overlay"},[i("img",{staticClass:"app-loader",staticStyle:{},attrs:{src:"https://img.tyt.by/i/by4/ajax-loader.gif"}})])}],Z={name:"AppLoader",components:{}},Y=Z,K=(i("451d"),Object(N["a"])(Y,J,W,!1,null,null,null)),Q=K.exports,X=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("section",{staticClass:"section-header"},[t.showProp(t.sectionLabel)?i("div",{staticClass:"section-label"},[t._v(" "+t._s(t.sectionLabel)+" ")]):t._e(),t.showProp(t.sectionHeader)?i("h2",[t._v(t._s(t.sectionHeader))]):t._e(),t.showProp(t.sectionMeta)?i("div",{staticClass:"section-meta",domProps:{innerHTML:t._s(t.sectionMeta)}}):t._e(),t.showProp(t.sectionDescription)?i("div",{staticClass:"description",domProps:{innerHTML:t._s(t.sectionDescription)}}):t._e()])},tt=[],et={name:"SectionHeader",props:{sectionLabel:String,sectionHeader:String,sectionMeta:String,sectionDescription:String},methods:{showProp:function(t){return void 0!==t&&t.trim().length>0}}},it=et,at=Object(N["a"])(it,X,tt,!1,null,null,null),nt=at.exports,st=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},ot=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"app-sharelist"},[i("header",[t._v("Поделиться:")]),i("ul",{staticClass:"b-sharelist"},[i("li",{staticClass:"b-sharelist__li"},[i("a",{staticClass:"socshare-link",attrs:{id:"share-vk","data-inc":"1",rel:"nofollow",target:"_blank",title:"Поделиться с друзьями в Vkontakte",href:"https://vk.com/share.php?url="}},[i("span",{staticClass:"b-socshare m-vk"},[i("i",{staticClass:"soc-icon b-icon icon-vk"})])])]),i("li",{staticClass:"b-sharelist__li"},[i("a",{staticClass:"socshare-link",attrs:{id:"shareLinkFB","data-inc":"1",rel:"nofollow",target:"_blank",title:"Поделиться с друзьями в Facebook",href:"https://www.facebook.com/sharer.php?u="}},[i("span",{staticClass:"b-socshare m-fb"},[i("i",{staticClass:"soc-icon b-icon icon-fb"})])])]),i("li",{staticClass:"b-sharelist__li"},[i("a",{staticClass:"socshare-link",attrs:{id:"shareLinkTW","data-inc":"1",rel:"nofollow",target:"_blank",title:"Поделиться с друзьями в Twitter",href:"https://twitter.com/intent/tweet?url="}},[i("span",{staticClass:"b-socshare m-twt"},[i("i",{staticClass:"soc-icon b-icon icon-twt"})])])]),i("li",{staticClass:"b-sharelist__li"},[i("a",{staticClass:"socshare-link",attrs:{id:"shareLinkOD","data-inc":"1",rel:"nofollow",target:"_blank",title:"Поделиться с друзьями в Одноклассниках",href:"https://connect.ok.ru/offer?url="}},[i("span",{staticClass:"b-socshare m-od"},[i("i",{staticClass:"soc-icon b-icon icon-od"})])])]),i("li",{staticClass:"b-sharelist__li"},[i("a",{staticClass:"socshare-link",attrs:{id:"shareLinkTG",rel:"nofollow",target:"_blank",title:"Поделиться с друзьями в Telegram",href:"https://t.me/share/url?url="}},[i("span",{staticClass:"b-socshare m-tg"},[i("i",{staticClass:"b-icon icon-tg"})])])]),i("li",{staticClass:"b-sharelist__li"},[i("a",{staticClass:"socshare-link",attrs:{id:"shareLinkVB",rel:"nofollow",target:"_blank",title:"Поделиться с друзьями в Viber",href:"viber://forward?text="}},[i("span",{staticClass:"b-socshare m-vb"},[i("i",{staticClass:"b-icon icon-vb"})])])])])])}],lt=(i("810b"),{}),rt=Object(N["a"])(lt,st,ot,!1,null,null,null),ct=rt.exports,pt=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{directives:[{name:"resize",rawName:"v-resize",value:t.onResize,expression:"onResize"}],staticClass:"section-image start-animation-metro",style:{height:t.ratioHeight}},[t._m(0),t._m(1),t._m(2)])},ut=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"metro-bg-01"},[i("img",{attrs:{src:"https://img.tyt.by/news/special/metro-game/tunnel-inner.svg",alt:""}})])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"metro-bg-02"},[i("img",{attrs:{src:"https://img.tyt.by/news/special/metro-game/tunnel.svg",alt:""}})])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"metro-bg-03"},[i("img",{attrs:{src:"https://img.tyt.by/news/special/metro-game/metro.svg",alt:""}})])}],mt={name:"AnimationStartSlide",data:function(){return{ratioHeight:"340px"}},methods:{onResize:function(t){var e=t.width,i=e/1.7647;this.ratioHeight="".concat(i,"px")}},mounted:function(){this.ratioHeight="".concat(this.$el.offsetWidth/1.7647,"px")}},dt=mt,ht=(i("3b32"),Object(N["a"])(dt,pt,ut,!1,null,null,null)),gt=ht.exports,ft=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"stations-count"},[t.count>0?i("span",[t._v(" Еще можно поставить точек "),i("span",{staticClass:"label"},[t._v(t._s(t.count))])]):i("span",[t._v("Точек не осталось")])])},bt=[],vt={name:"UserStationsInfo",props:{count:Number}},yt=vt,Ct=(i("00a2"),Object(N["a"])(yt,ft,bt,!1,null,null,null)),_t=Ct.exports,kt=i("cffa"),wt=[{id:110,line:1,tooltip:"Малінаўка (Малиновка)",position:{lat:53.8498337,lng:27.4747816},active:!0,draggable:!1,visible:!0,className:"stations-line-1"},{id:111,line:1,tooltip:"Пятроўшчына (Петровщина)",position:{lat:53.8645777,lng:27.4860214},active:!0,draggable:!1,visible:!0,className:"stations-line-1"},{id:112,line:1,tooltip:"Міхалова (Михалово)",position:{lat:53.8766884,lng:27.4969447},active:!0,draggable:!1,visible:!0,className:"stations-line-1"},{id:113,line:1,tooltip:"Грушаўка (Грушевка)",position:{lat:53.8861937,lng:27.5133705},active:!0,draggable:!1,visible:!0,className:"stations-line-1"},{id:114,line:1,tooltip:"Інстытут Культуры (Институт Культуры)",position:{lat:53.885906,lng:27.5406861},active:!0,draggable:!1,visible:!0,className:"stations-line-1"},{id:115,line:1,tooltip:"Плошча Леніна (Площадь Ленина)",position:{lat:53.8926399,lng:27.5476491},active:!0,draggable:!1,visible:!0,className:"stations-line-1"},{id:116,line:1,tooltip:"Кастрычніцкая (Октябрьская)",position:{lat:53.902129,lng:27.5621384},active:!0,draggable:!1,visible:!0,className:"stations-line-1"},{id:117,line:1,tooltip:"Плошча Перамогі (Площадь Победы)",position:{lat:53.909505,lng:27.5762415},active:!0,draggable:!1,visible:!0,className:"stations-line-1"},{id:118,line:1,tooltip:"Плошча Якуба Коласа (Площадь Якуба Коласа)",position:{lat:53.9158972,lng:27.584213},active:!0,draggable:!1,visible:!0,className:"stations-line-1"},{id:119,line:1,tooltip:"Акадэмія Навук (Академия Наук)",position:{lat:53.9217671,lng:27.5992227},active:!0,draggable:!1,visible:!0,className:"stations-line-1"},{id:120,line:1,tooltip:"Парк Чалюскінцаў (Парк Челюскинцев)",position:{lat:53.9241679,lng:27.6133525},active:!0,draggable:!1,visible:!0,className:"stations-line-1"},{id:121,line:1,tooltip:"Маскоўская (Московская)",position:{lat:53.9279268,lng:27.6276219},active:!0,draggable:!1,visible:!0,className:"stations-line-1"},{id:122,line:1,tooltip:"Усход (Восток)",position:{lat:53.9344645,lng:27.651279},active:!0,draggable:!1,visible:!0,className:"stations-line-1"},{id:123,line:1,tooltip:"Барысаўскі тракт (Борисовский тракт)",position:{lat:53.9384972,lng:27.6657629},active:!0,draggable:!1,visible:!0,className:"stations-line-1"},{id:124,line:1,tooltip:"Уручча (Уручье)",position:{lat:53.9453522,lng:27.6878643},active:!0,draggable:!1,visible:!0,className:"stations-line-1"},{id:210,line:2,tooltip:"Магілеўская (Могилевская)",position:{lat:53.8620975,lng:27.6737612},active:!0,draggable:!1,visible:!0,className:"stations-line-2"},{id:211,line:2,tooltip:"Аўтазаводская (Автозаводская)",position:{lat:53.8690757,lng:27.6485592},active:!0,draggable:!1,visible:!0,className:"stations-line-2"},{id:212,line:2,tooltip:"Партызанская (Партизанская)",position:{lat:53.8762394,lng:27.628963},active:!0,draggable:!1,visible:!0,className:"stations-line-2"},{id:213,line:2,tooltip:"Трактарны завод (Тракторный завод)",position:{lat:53.8900888,lng:27.6144147},active:!0,draggable:!1,visible:!0,className:"stations-line-2"},{id:214,line:2,tooltip:"Пралетарская (Пролетарская)",position:{lat:53.8899908,lng:27.5861388},active:!0,draggable:!1,visible:!0,className:"stations-line-2"},{id:215,line:2,tooltip:"Першамайская (Первомайская)",position:{lat:53.8939772,lng:27.5706518},active:!0,draggable:!1,visible:!0,className:"stations-line-2"},{id:216,line:2,tooltip:"Купалаўская (Купаловская)",position:{lat:53.9008743,lng:27.5618005},active:!0,draggable:!1,visible:!0,className:"stations-line-2"},{id:217,line:2,tooltip:"Няміга (Немига)",position:{lat:53.9057729,lng:27.5539362},active:!0,draggable:!1,visible:!0,className:"stations-line-2"},{id:218,line:2,tooltip:"Фрунзенская (Фрунзенская)",position:{lat:53.9053463,lng:27.5392082},active:!0,draggable:!1,visible:!0,className:"stations-line-2"},{id:219,line:2,tooltip:"Маладзежная (Молодежная)",position:{lat:53.90674,lng:27.5226456},active:!0,draggable:!1,visible:!0,className:"stations-line-2"},{id:220,line:2,tooltip:"Пушкінская (Пушкинская)",position:{lat:53.9096567,lng:27.4970198},active:!0,draggable:!1,visible:!0,className:"stations-line-2"},{id:221,line:2,tooltip:"Спартыўная (Спортивная)",position:{lat:53.9084275,lng:27.4793816},active:!0,draggable:!1,visible:!0,className:"stations-line-2"},{id:222,line:2,tooltip:"Кунцаўшчына (Кунцевщина)",position:{lat:53.9062691,lng:27.4539918},active:!0,draggable:!1,visible:!0,className:"stations-line-2"},{id:223,line:2,tooltip:"Каменная Горка (Каменная Горка)",position:{lat:53.9068364,lng:27.4377001},active:!0,draggable:!1,visible:!0,className:"stations-line-2"},{id:310,line:3,tooltip:"Слуцкі Гасцінец (Слуцкий Гостинец)",position:{lat:53.843596,lng:27.534163},active:!1,draggable:!1,visible:!0,className:"stations-line-3"},{id:311,line:3,tooltip:"Немаршанскі парк (Неморшанский парк)",position:{lat:53.850185,lng:27.5367486},active:!1,draggable:!1,visible:!0,className:"stations-line-3"},{id:312,line:3,tooltip:"Аэрадромная (Аэродромная)",position:{lat:53.8658904,lng:27.5434113},active:!1,draggable:!1,visible:!0,className:"stations-line-3"},{id:313,line:3,tooltip:"Кавальская Слабада (Ковальская Слобода)",position:{lat:53.8777352,lng:27.5495803},active:!0,draggable:!1,visible:!0,className:"stations-line-3"},{id:314,line:3,tooltip:"Вакзальная (Вокзальная)",position:{lat:53.8897063,lng:27.5474668},active:!0,draggable:!1,visible:!0,className:"stations-line-3"},{id:315,line:3,tooltip:"Плошча Францішка Багушэвіча (Площадь Франтишка Богушевича)",position:{lat:53.8964713,lng:27.5379986},active:!0,draggable:!1,visible:!0,className:"stations-line-3"},{id:316,line:3,tooltip:"Юбілейная плошча (Юбилейная площадь)",position:{lat:53.9046542,lng:27.5402731},active:!0,draggable:!1,visible:!0,className:"stations-line-3"},{id:317,line:3,tooltip:"Прафсаюзная (Профсоюзная)",position:{lat:53.9122399,lng:27.5459996},active:!1,draggable:!1,visible:!0,className:"stations-line-3"},{id:318,line:3,tooltip:"Пярэспа (Переспа)",position:{lat:53.9176096,lng:27.5566936},active:!1,draggable:!1,visible:!0,className:"stations-line-3"},{id:319,line:3,tooltip:"Камароўская (Комаровская)",position:{lat:53.921328,lng:27.5676048},active:!1,draggable:!1,visible:!0,className:"stations-line-3"},{id:320,line:3,tooltip:"Парк Дружбы народаў (Парк Дружбы народов)",position:{lat:53.9317801,lng:27.5774378},active:!1,draggable:!1,visible:!0,className:"stations-line-3"},{id:321,line:3,tooltip:"Івана Мележа (Ивана Мележа)",position:{lat:53.9431831,lng:27.5889498},active:!1,draggable:!1,visible:!0,className:"stations-line-3"},{id:322,line:3,tooltip:"Зялены Луг (Зеленый Луг)",position:{lat:53.9495401,lng:27.6066229},active:!1,draggable:!1,visible:!0,className:"stations-line-3"},{id:323,line:3,tooltip:"Лагойская (Логойская)",position:{lat:53.9558141,lng:27.6213241},active:!1,draggable:!1,visible:!0,className:"stations-line-3"}],St={name:"LeafletMap",components:{LMap:m["a"],LTileLayer:d["a"],LMarker:h["a"],LPolyline:g["a"],LPolygon:f["a"],LLayerGroup:b["a"],LTooltip:v["a"],LControl:y["a"],LControlZoom:C["a"],LIcon:_["a"],LCircleMarker:k["a"],PopupModal:G,AppLoader:Q,UiButton:M,SectionHeader:nt,SharingList:ct,AnimationStartSlide:gt,UserStationsInfo:_t},data:function(){return{urlForStatistics:"https://www.tut.by/stat/quiz?answ_num=0&id=1134&stat=1&answ_val=",showPasswordInput:!1,gameStep:1,latCount:67,lngCount:36,statisticsData:[],statisticsMaxValue:0,inputParams:{},simpleMapScreenshoter:null,showLoader:!1,mapScreenshot:"",markers:[],map:{data:[{id:"l1",name:"Московская линия",markers:this.getStations1Coords(),polyline:{points:this.getLine1Coords(),visible:!0,color:"#4692F0"},markersColor:"#4692F0",visible:!0},{id:"l2",name:"Заводская линия",markers:this.getStations2Coords(),polyline:{points:this.getLine2Coords(),visible:!0,color:"#FB6483"},markersColor:"#FB6483",visible:!0}],minLat:53.8,maxLat:53.98,minLng:27.38,maxLng:27.849,latDelta:.005,lngDelta:.007,options:{zoomControl:!1,attributionControl:!1,zoomSnap:!0},zoom:{value:11,min:11,max:15},bounds:Object(c["latLngBounds"])([[53.8,27.38],[53.98,27.849]]),tileUrl:"https://{s}.basemaps.cartocdn.com/light_all/{z}/{x}/{y}{r}.png"},commentsBlock:null,userStationsCount:14,iconSize:20,iconAnchor:[20,51],popup:{show:!1,showButton:!1,text:""}}},methods:{showHotmap:function(){this.gameStep=4},showStat:function(){this.gameStep=-612479,this.showPasswordInput=!1},theAction:function(){this.showPasswordInput=!0},moveUserMarkerHandler:function(t,e){var i=this;this.markers.forEach((function(a){a.id===e&&(a.cell=i.getCellNum(t.lat,t.lng))}))},closePopup:function(t){this.popup.show=!1,t&&this.showResults()},handleResult:function(t){var e=this,i=new Image,a=this;i.onload=function(){var i=Array.from(document.querySelectorAll(".app-sharelist .b-sharelist__li"));i.forEach((function(e){var i=e.querySelector("a"),n=i.id,s=encodeURIComponent("https://share.tut.by?"),o=encodeURIComponent(a.inputParams.sharingUrl),l=encodeURIComponent(a.inputParams.sharingTitle),r=encodeURIComponent(t.secure_url),c=btoa(JSON.stringify({url:o,title:l,image:r})).replace(/=+$/g,"").replace(/(.)(.)/g,"$2$1");"shareLinkFB"===n?i.setAttribute("href","https://www.facebook.com/sharer.php?u=".concat(s).concat(c)):"share-vk"===n?i.setAttribute("href","https://vk.com/share.php?url=".concat(o,"&title=").concat(l,'&description="description"&image=').concat(r,"&noparse=true")):"shareLinkTW"===n?i.setAttribute("href","https://twitter.com/share?url=".concat(o,"&text=").concat(l)):"shareLinkOD"===n?i.setAttribute("href","https://connect.ok.ru/offer?url=".concat(s).concat(c)):"shareLinkTG"===n?i.setAttribute("href","https://t.me/share/url?url=".concat(s).concat(c)):"shareLinkVB"===n&&i.setAttribute("href","viber://forward?text=".concat(s).concat(c))})),e.mapScreenshot=t.secure_url,e.showLoader=!1},i.src=t.secure_url},onMapClick:function(t){this.userStationsLeft>0&&this.addMarker(t)},createUserMarkerTooltip:function(t){return"lat: ".concat(t.lat," | lng: ").concat(t.lng)},getScreenShot:function(){var t=document.querySelector(".b-comments");if(!this.isNull(t)){var e=document.querySelector(".b-comments").innerHTML.trim();this.isNull(e)||(this.commentsBlock=e)}var i=this.$refs.map.mapObject,a=this;if(!this.simpleMapScreenshoter){var n={hidden:!0,screenName:function(){return(new Date).toDateString()}};this.simpleMapScreenshoter=window.L.simpleMapScreenshoter(n).addTo(i)}this.simpleMapScreenshoter.takeScreen("blob").then((function(t){var e=new FileReader;e.onload=function(){var t=e.result.split(",")[1],i=new Headers;i.append("Content-Type","application/x-www-form-urlencoded");var n=new URLSearchParams;n.append("base64Str",t),n.append("upldf","metro-game");var s={method:"POST",headers:i,body:n,redirect:"follow"},o="https://tut-quiz.herokuapp.com/upload";fetch(o,s).then((function(t){return t.json()})).then((function(t){a.handleResult(t)})).catch((function(t){return console.log(t)}))},e.readAsDataURL(t)})).catch((function(t){console.error(t.toString())}))},canAddMarker:function(t,e){return t>=this.map.minLat&&t<=this.map.maxLat&&e>=this.map.minLng&&e<=this.map.maxLng},getCellNum:function(t,e){return Math.floor((e-this.map.minLng)/.007)+1+67*Math.floor(36-(t-this.map.minLat)/.005)},addMarker:function(t){var e=[t.latlng.lat,t.latlng.lng];if(this.canAddMarker.apply(this,e)){var i={id:this.markers.length+1,line:-1,position:e,cell:this.getCellNum.apply(this,e),active:!0,draggable:!0,visible:!0,icon:"https://img.tyt.by/news/special/metro-game/green-marker.png",icon2x:"https://img.tyt.by/news/special/metro-game/green-marker@2x.png",className:"user-marker"};this.markers.push(i),this.markers.length===this.userStationsCount&&(this.popup.text=this.inputParams.finalPopupText,this.popup.showButton=!0,this.popup.show=!0)}else this.popup.showButton=!1,this.popup.text="Нельзя ставить точки за пределами Минска!",this.popup.show=!0},removeLast:function(){this.markers.pop()},showResults:function(){this.showLoader=!0,this.gameStep=3;var t=this,e=[];this.markers.forEach((function(i){var a=function(){return u.a.get("".concat(t.urlForStatistics).concat(i.cell))};e.push(a())})),u.a.all(e).then(u.a.spread((function(e){for(var i=e.data.data,a=t.lngCount*t.latCount+1,n=0;n<=a;n++){var s=i[n];t.statisticsData.push(s||0),t.statisticsMaxValue<s&&(t.statisticsMaxValue=s)}t.statisticsData=t.statisticsData.map((function(e){return e/t.statisticsMaxValue})),setTimeout((function(){return t.getScreenShot()}),1e3)})))},removeMarker:function(t){this.markers.splice(t,1)},runTonnelAnimation:function(){var t=document.querySelector(".metro-bg-03"),e=document.querySelector(".metro-bg-01"),i=document.querySelector(".start-game-button");kt["a"].fromTo(e,1,{opacity:0},{opacity:1}),kt["a"].fromTo(t,.8,{left:-600},{left:0}),kt["a"].fromTo(i,{opacity:0},{duration:1.5,delay:2.5,opacity:1})},runGameAgain:function(){this.gameStep=1,this.markers=[],this.simpleMapScreenshoter=null,this.mapScreenshot="",this.runTonnelAnimation()},getStations1Coords:function(){return wt.filter((function(t){return 1===t.line}))},getStations2Coords:function(){return wt.filter((function(t){return 2===t.line}))},getStations3Coords:function(){return wt.filter((function(t){return 3===t.line}))},getLine1Coords:function(){return this.getStations1Coords().map((function(t){return t.position}))},getLine2Coords:function(){return this.getStations2Coords().map((function(t){return t.position}))},getLine3Coords:function(){return this.getStations3Coords().map((function(t){return t.position}))},getUserLineCoords:function(){return this.markers.map((function(t){return t.position}))},isNull:function(t){return"object"===Object(r["a"])(t)&&!t}},mounted:function(){var t=this;this.$nextTick((function(){t.inputParams=window.inputData;var e=t.inputParams.startHeader,i=t.inputParams.startMeta;void 0!==e&&0!==e.length||(t.inputParams.startHeader=document.querySelector(".m_header h1").innerText.trim()),void 0!==i&&0!==i.length||(t.inputParams.startMeta=document.querySelector(".b-article-details").innerHTML),t.runTonnelAnimation()}))},computed:{cellsCoords:function(){var t=this;return Array.from(Array(this.latCount*this.lngCount).keys()).map((function(e){return{id:e,coords:[[t.map.maxLat-t.map.latDelta*Math.floor(e/t.latCount),t.map.minLng+t.map.lngDelta*(e%t.latCount)],[t.map.maxLat-t.map.latDelta*Math.floor(e/t.latCount),t.map.minLng+t.map.lngDelta*(e%t.latCount+1)],[t.map.maxLat-t.map.latDelta*(Math.floor(e/t.latCount)+1),t.map.minLng+t.map.lngDelta*(e%t.latCount+1)],[t.map.maxLat-t.map.latDelta*(Math.floor(e/t.latCount)+1),t.map.minLng+t.map.lngDelta*(e%t.latCount)]],opacity:t.statisticsData[e+1]}}))},latCoords:function(){var t=this;return Array.from(Array(37).keys()).map((function(e){return[{lat:t.map.minLat+t.map.latDelta*e,lng:t.map.minLng},{lat:t.map.minLat+t.map.latDelta*e,lng:t.map.maxLng}]}))},lngCoords:function(){var t=this;return Array.from(Array(68).keys()).map((function(e){return[{lat:t.map.minLat,lng:t.map.minLng+t.map.lngDelta*e},{lat:t.map.maxLat,lng:t.map.minLng+t.map.lngDelta*e}]}))},markersLine:function(){return 0===this.markers.length?[]:this.markers.map((function(t){return t.position}))},isDisabledFinishButton:function(){return this.userStationAdded<4},dynamicSize:function(){return[this.iconSize,1.15*this.iconSize]},dynamicAnchor:function(){return[this.iconSize/2,this.iconSize/2]},userMarkers:function(){return this.markers.filter((function(t){return-1===t.line}))},userStationsLeft:function(){return this.userStationsCount-this.userMarkers.length},userStationAdded:function(){return this.userMarkers.length},getStations1Line:function(){return this.markers.filter((function(t){return 1===t.line}))},getStations2Line:function(){return this.markers.filter((function(t){return 2===t.line}))},getStations3Line:function(){return this.markers.filter((function(t){return 3===t.line}))},getStationsUserLine:function(){return this.markers.filter((function(t){return-1===t.line}))}}},Lt=St,xt=(i("7251"),Object(N["a"])(Lt,o,l,!1,null,null,null)),Nt=xt.exports,Pt={name:"App",components:{LeafletMap:Nt}},Mt=Pt,zt=(i("5c0b"),Object(N["a"])(Mt,n,s,!1,null,null,null)),Bt=zt.exports,$t=i("bd8c"),Tt=i.n($t),At=i("e49d"),Dt=i.n(At);a["a"].use(i("3717")),a["a"].use(Dt.a),a["a"].use(Tt.a),a["a"].config.productionTip=!1,new a["a"]({render:function(t){return t(Bt)}}).$mount("#app")},"5c0b":function(t,e,i){"use strict";var a=i("9c0c"),n=i.n(a);n.a},6812:function(t,e,i){"use strict";var a=i("ee04"),n=i.n(a);n.a},7251:function(t,e,i){"use strict";var a=i("7e93"),n=i.n(a);n.a},"7e93":function(t,e,i){},"810b":function(t,e,i){"use strict";var a=i("53e7"),n=i.n(a);n.a},"9c0c":function(t,e,i){},d5ed:function(t,e,i){"use strict";var a=i("3822"),n=i.n(a);n.a},e171:function(t,e,i){},ee04:function(t,e,i){},f2ec:function(t,e,i){"use strict";var a=i("4bd7"),n=i.n(a);n.a}});
//# sourceMappingURL=app.017bfbcf.js.map